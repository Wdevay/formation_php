<h1 class="text-center">Admin Dashboard</h1>
<p>Il est temps d'administrer</p>
<a class="btn btn-primary <?php if(isset($_GET['page']) && $_GET['page']==='admin') echo "active"; ?>" aria-current="page" href="?page=admin">Post</a>
<a class="btn btn-primary <?php if(isset($_GET['page']) && $_GET['page']==='admin_user') echo "active"; ?>" aria-current="page" href="?page=admin_user">User</a>

<h2>Handle post</h2>
<table class="table table-striped">
  <thead>
    <tr>
      <th scope="col">id</th>
      <th scope="col">image</th>
      <th scope="col">Title</th>
      <th scope="col">Description</th>
      <th scope="col">Created at</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
  <tbody>
    <?php foreach ($posts as $post) : ?>
    <tr>
      <th scope="row"><?= $post['id'] ?></th>
      <td><img src="<?= $post['image'] ?>" alt="image" height="50" width="50"></td>
      <td><?= $post['title'] ?></td>
      <td><?= substr($post['description'], 0, 150) ?></td>
      <td><?= $post['created_at'] ?></td>
      <td>
        <a class="btn btn-info" href="?page=admin_post_uc&id=<?= $post['id'] ?>">Edit</a>
        <a class="btn btn-danger" onclick="confirmDelete(<?= $post['id'] ?>)">Delete</a>
    </td>
    </tr>
    <?php endforeach; ?>  
  </tbody>
</table>
<a class="btn btn-success mb-3" href="?page=admin_post_uc">Add new post</a>
<script>
  function confirmDelete(id) {
    const question = window.confirm("Are you sure you want to delete this post ?");
    if (question) {
      window.location.href = `?page=admin_post_delete&id=${id}`
    }
  }
</script>